const pe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};pe();function P(){}function re(t){return t()}function X(){return Object.create(null)}function L(t){t.forEach(re)}function me(t){return typeof t=="function"}function G(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let A;function ee(t,e){return A||(A=document.createElement("a")),A.href=e,t===A.href}function _e(t){return Object.keys(t).length===0}function m(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function j(t){return document.createTextNode(t)}function k(){return j(" ")}function B(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function he(t){return Array.from(t.childNodes)}function N(t,e){t.value=e==null?"":e}function ye(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let H;function T(t){H=t}const S=[],te=[],x=[],ne=[],ge=Promise.resolve();let M=!1;function be(){M||(M=!0,ge.then(ie))}function D(t){x.push(t)}const J=new Set;let C=0;function ie(){const t=H;do{for(;C<S.length;){const e=S[C];C++,T(e),$e(e.$$)}for(T(null),S.length=0,C=0;te.length;)te.pop()();for(let e=0;e<x.length;e+=1){const n=x[e];J.has(n)||(J.add(n),n())}x.length=0}while(S.length);for(;ne.length;)ne.pop()();M=!1,J.clear(),T(t)}function $e(t){if(t.fragment!==null){t.update(),L(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const I=new Set;let ve;function R(t,e){t&&t.i&&(I.delete(t),t.i(e))}function F(t,e,n,s){if(t&&t.o){if(I.has(t))return;I.add(t),ve.c.push(()=>{I.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function le(t){t&&t.c()}function K(t,e,n,s){const{fragment:r,on_mount:i,on_destroy:c,after_update:a}=t.$$;r&&r.m(e,n),s||D(()=>{const l=i.map(re).filter(me);c?c.push(...l):L(l),t.$$.on_mount=[]}),a.forEach(D)}function V(t,e){const n=t.$$;n.fragment!==null&&(L(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function we(t,e){t.$$.dirty[0]===-1&&(S.push(t),be(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,n,s,r,i,c,a=[-1]){const l=H;T(t);const u=t.$$={fragment:null,ctx:null,props:i,update:P,not_equal:r,bound:X(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:X(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};c&&c(u.root);let o=!1;if(u.ctx=n?n(t,e.props||{},(f,h,...E)=>{const _=E.length?E[0]:h;return u.ctx&&r(u.ctx[f],u.ctx[f]=_)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](_),o&&we(t,f)),h}):[],u.update(),o=!0,L(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const f=he(e.target);u.fragment&&u.fragment.l(f),f.forEach(y)}else u.fragment&&u.fragment.c();e.intro&&R(t.$$.fragment),K(t,e.target,e.anchor,e.customElement),ie()}T(l)}class Z{$destroy(){V(this,1),this.$destroy=P}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!_e(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ke(t){let e,n;return{c(){e=p("a"),n=j("Login"),d(e,"href",t[0])},m(s,r){g(s,e,r),m(e,n)},p:P,i:P,o:P,d(s){s&&y(e)}}}const Pe="ae7bb19fe4ae439f85994652dc206122",Ee="http://localhost:5173",Se="https://accounts.spotify.com/authorize",Te="token",Le="playlist-modify-public";function Oe(t){return[`${Se}?client_id=${Pe}&redirect_uri=${Ee}&response_type=${Te}&scope=${Le}`]}class Ae extends Z{constructor(e){super(),Y(this,e,Oe,ke,G,{})}}const oe=t=>{const n=new URLSearchParams(t.substr(1)).get("access_token");return console.log(n),n};function se(t){let e;return{c(){e=p("div"),e.innerHTML=`<h2 class="svelte-ic62it">Generating your playlist</h2> 
      <div class="lds-ring svelte-ic62it"><div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div></div>`,d(e,"class","loading svelte-ic62it")},m(n,s){g(n,e,s)},d(n){n&&y(e)}}}function Ne(t){let e,n,s,r,i,c,a,l,u,o,f,h,E,_,$,U;return{c(){e=p("form"),n=p("div"),s=p("label"),s.textContent="Title of your playlist",r=k(),i=p("input"),c=k(),a=p("div"),l=p("label"),l.textContent="Secret message",u=k(),o=p("input"),f=k(),h=p("button"),E=j("Generate"),d(s,"for","title"),d(i,"type","text"),d(i,"id","title"),d(i,"name","title"),d(i,"class","svelte-ic62it"),d(n,"class","wrap svelte-ic62it"),d(l,"for","sentence"),d(o,"type","text"),d(o,"id","sentence"),d(o,"name","sentence"),d(o,"class","svelte-ic62it"),d(a,"class","wrap svelte-ic62it"),h.disabled=_=!t[5]||!t[2],d(e,"class","svelte-ic62it")},m(b,v){g(b,e,v),m(e,n),m(n,s),m(n,r),m(n,i),N(i,t[2]),m(e,c),m(e,a),m(a,l),m(a,u),m(a,o),N(o,t[5]),m(e,f),m(e,h),m(h,E),$||(U=[B(i,"input",t[7]),B(o,"input",t[8]),B(e,"submit",t[9])],$=!0)},p(b,v){v&4&&i.value!==b[2]&&N(i,b[2]),v&32&&o.value!==b[5]&&N(o,b[5]),v&36&&_!==(_=!b[5]||!b[2])&&(h.disabled=_)},d(b){b&&y(e),$=!1,L(U)}}}function Ce(t){let e,n,s,r,i,c,a,l,u;return{c(){e=p("a"),n=j("Open playlist"),s=k(),r=p("br"),i=p("br"),c=p("br"),a=k(),l=p("iframe"),d(e,"href",t[0]),d(e,"target","_blank"),d(l,"title","playlist"),ye(l,"border-radius","12px"),ee(l.src,u="https://open.spotify.com/embed/playlist/"+t[1]+"?utm_source=generator")||d(l,"src",u),d(l,"width","100%"),d(l,"height","380"),d(l,"frameborder","0"),l.allowFullscreen=!0,d(l,"allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture")},m(o,f){g(o,e,f),m(e,n),g(o,s,f),g(o,r,f),g(o,i,f),g(o,c,f),g(o,a,f),g(o,l,f)},p(o,f){f&1&&d(e,"href",o[0]),f&2&&!ee(l.src,u="https://open.spotify.com/embed/playlist/"+o[1]+"?utm_source=generator")&&d(l,"src",u)},d(o){o&&y(e),o&&y(s),o&&y(r),o&&y(i),o&&y(c),o&&y(a),o&&y(l)}}}function xe(t){let e,n,s=t[4]&&se();function r(a,l){return a[3]?Ce:Ne}let i=r(t),c=i(t);return{c(){e=p("section"),s&&s.c(),n=k(),c.c()},m(a,l){g(a,e,l),s&&s.m(e,null),m(e,n),c.m(e,null)},p(a,[l]){a[4]?s||(s=se(),s.c(),s.m(e,n)):s&&(s.d(1),s=null),i===(i=r(a))&&c?c.p(a,l):(c.d(1),c=i(a),c&&(c.c(),c.m(e,null)))},i:P,o:P,d(a){a&&y(e),s&&s.d(),c.d()}}}const Ie="https://api.spotify.com/v1/search";function je(t,e,n){let s="",r="",i="",c=!1,a=!1,l="";const u=_=>_.replace(/[^a-zA-Z]/g,""),o=async()=>{n(4,a=!0);const _=oe(document.location.hash),$=l.split(" ");if(_){const v=(await(await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${_}`}})).json()).id,Q=new Headers;Q.append("Authorization",`Bearer ${_}`);const q=new URLSearchParams;q.append("type","track"),q.append("limit","50");const ce=$.map(w=>new Request(`${Ie}?${q}&q=track:${encodeURI(u(w))}`,{method:"GET",headers:Q})),ae=await Promise.all(ce.map(w=>fetch(w))),ue=(await Promise.all(ae.map(w=>w.json()))).map((w,z)=>{var W;return((W=w.tracks.items.find(de=>u(de.name).toLowerCase().slice(0,Math.min(u($[z]).length,5))===u($[z]).toLowerCase().slice(0,Math.min(u($[z]).length,5))))==null?void 0:W.uri)||w.tracks.items[0].uri}),O=await(await fetch(`https://api.spotify.com/v1/users/${v}/playlists`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({name:i,description:"A playlist created with Vite + Svelte",public:!0})})).json();console.log(O),n(1,r=O.id);const fe=O.uri;n(0,s=fe),O.external_urls.spotify,await(await fetch(`https://api.spotify.com/v1/users/${v}/playlists/${r}/tracks`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({uris:ue})})).json(),setTimeout(()=>{n(4,a=!1),n(3,c=!0)},3e3)}};function f(){i=this.value,n(2,i)}function h(){l=this.value,n(5,l)}return[s,r,i,c,a,l,o,f,h,_=>{_.preventDefault(),o()}]}class Re extends Z{constructor(e){super(),Y(this,e,je,xe,G,{})}}function Ue(t){let e,n;return e=new Ae({}),{c(){le(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function qe(t){let e,n;return e=new Re({}),{c(){le(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function ze(t){let e,n,s,r,i,c,a;const l=[qe,Ue],u=[];function o(f,h){return f[0]?0:1}return i=o(t),c=u[i]=l[i](t),{c(){e=p("main"),n=p("h1"),n.textContent="Generate your Playlist with a secret message",s=k(),r=p("div"),c.c(),d(n,"class","svelte-1nh7t5c"),d(r,"class","card")},m(f,h){g(f,e,h),m(e,n),m(e,s),m(e,r),u[i].m(r,null),a=!0},p:P,i(f){a||(R(c),a=!0)},o(f){F(c),a=!1},d(f){f&&y(e),u[i].d()}}}function Be(t){return[oe(document.location.hash)]}class Je extends Z{constructor(e){super(),Y(this,e,Be,ze,G,{})}}new Je({target:document.getElementById("app")});
