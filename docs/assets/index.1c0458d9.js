const _e=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}};_e();function E(){}function ie(t){return t()}function te(){return Object.create(null)}function A(t){t.forEach(ie)}function he(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let N;function ne(t,e){return N||(N=document.createElement("a")),N.href=e,t===N.href}function ye(t){return Object.keys(t).length===0}function v(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function _(t){return document.createElement(t)}function M(t){return document.createTextNode(t)}function k(){return M(" ")}function I(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function be(t){return Array.from(t.childNodes)}function C(t,e){t.value=e==null?"":e}function ge(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let G;function O(t){G=t}const S=[],se=[],j=[],le=[],ve=Promise.resolve();let J=!1;function $e(){J||(J=!0,ve.then(oe))}function D(t){j.push(t)}const B=new Set;let x=0;function oe(){const t=G;do{for(;x<S.length;){const e=S[x];x++,O(e),we(e.$$)}for(O(null),S.length=0,x=0;se.length;)se.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];B.has(n)||(B.add(n),n())}j.length=0}while(S.length);for(;le.length;)le.pop()();J=!1,B.clear(),O(t)}function we(t){if(t.fragment!==null){t.update(),A(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const R=new Set;let ke;function q(t,e){t&&t.i&&(R.delete(t),t.i(e))}function Y(t,e,n,s){if(t&&t.o){if(R.has(t))return;R.add(t),ke.c.push(()=>{R.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function ce(t){t&&t.c()}function K(t,e,n,s){const{fragment:l,on_mount:r,on_destroy:o,after_update:c}=t.$$;l&&l.m(e,n),s||D(()=>{const u=r.map(ie).filter(he);o?o.push(...u):A(u),t.$$.on_mount=[]}),c.forEach(D)}function V(t,e){const n=t.$$;n.fragment!==null&&(A(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pe(t,e){t.$$.dirty[0]===-1&&(S.push(t),$e(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,s,l,r,o,c=[-1]){const u=G;O(t);const a=t.$$={fragment:null,ctx:null,props:r,update:E,not_equal:l,bound:te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:te(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};o&&o(a.root);let m=!1;if(a.ctx=n?n(t,e.props||{},(d,$,...P)=>{const p=P.length?P[0]:$;return a.ctx&&l(a.ctx[d],a.ctx[d]=p)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](p),m&&Pe(t,d)),$}):[],a.update(),m=!0,A(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const d=be(e.target);a.fragment&&a.fragment.l(d),d.forEach(y)}else a.fragment&&a.fragment.c();e.intro&&q(t.$$.fragment),K(t,e.target,e.anchor,e.customElement),oe()}O(u)}class Z{$destroy(){V(this,1),this.$destroy=E}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!ye(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}console.log("adding some \u2764\uFE0F"),document.addEventListener("DOMContentLoaded",()=>{const t=document.createElement("footer");t.classList.add("made-with-love-footer"),t.innerHTML='<p>Made with <span class="heart">&hearts;</span> by <a target="_blank" href="https://thomasmaclean.be">Thomas MacLean</a></p>',document.body.appendChild(t);const e=t.querySelector(".heart");e.style.color="red";const n=t.querySelector("a");n.style.color="black",t.style.fontFamily="monospace",t.style.textAlign="center",t.style.position="absolute",t.style.bottom="0",t.style.width="100%"});function Le(t){let e,n;return{c(){e=_("a"),n=M("Login"),f(e,"href",t[0])},m(s,l){g(s,e,l),v(e,n)},p:E,i:E,o:E,d(s){s&&y(e)}}}const Te="ae7bb19fe4ae439f85994652dc206122",Ee="https://playlist.thomasmaclean.be",Se="https://accounts.spotify.com/authorize",Oe="token",Ae="playlist-modify-public";function Ne(t){return[`${Se}?client_id=${Te}&redirect_uri=${Ee}&response_type=${Oe}&scope=${Ae}`]}class Ce extends Z{constructor(e){super(),W(this,e,Ne,Le,F,{})}}const ae=t=>new URLSearchParams(t.substr(1)).get("access_token");function re(t){let e;return{c(){e=_("div"),e.innerHTML=`<h2 class="svelte-ic62it">Generating your playlist</h2> 
      <div class="lds-ring svelte-ic62it"><div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div></div>`,f(e,"class","loading svelte-ic62it")},m(n,s){g(n,e,s)},d(n){n&&y(e)}}}function xe(t){let e,n,s,l,r,o,c,u,a,m,d,$,P,p,b,L;return{c(){e=_("form"),n=_("div"),s=_("label"),s.textContent="Title of your playlist",l=k(),r=_("input"),o=k(),c=_("div"),u=_("label"),u.textContent="Secret message",a=k(),m=_("input"),d=k(),$=_("button"),P=M("Generate"),f(s,"for","title"),f(r,"type","text"),f(r,"id","title"),f(r,"name","title"),f(r,"class","svelte-ic62it"),f(n,"class","wrap svelte-ic62it"),f(u,"for","sentence"),f(m,"type","text"),f(m,"id","sentence"),f(m,"name","sentence"),f(m,"class","svelte-ic62it"),f(c,"class","wrap svelte-ic62it"),$.disabled=p=!t[5]||!t[2],f(e,"class","svelte-ic62it")},m(w,i){g(w,e,i),v(e,n),v(n,s),v(n,l),v(n,r),C(r,t[2]),v(e,o),v(e,c),v(c,u),v(c,a),v(c,m),C(m,t[5]),v(e,d),v(e,$),v($,P),b||(L=[I(r,"input",t[8]),I(m,"input",t[9]),I(e,"submit",t[10])],b=!0)},p(w,i){i&4&&r.value!==w[2]&&C(r,w[2]),i&32&&m.value!==w[5]&&C(m,w[5]),i&36&&p!==(p=!w[5]||!w[2])&&($.disabled=p)},d(w){w&&y(e),b=!1,A(L)}}}function Ie(t){let e,n,s,l,r,o,c,u,a,m,d,$,P,p,b,L,w;return{c(){e=_("a"),n=M("Open playlist"),s=k(),l=_("br"),r=k(),o=_("br"),c=k(),u=_("button"),u.textContent="Or redo",a=k(),m=_("br"),d=k(),$=_("br"),P=k(),p=_("iframe"),f(e,"href",t[0]),f(e,"target","_blank"),f(p,"title","playlist"),ge(p,"border-radius","12px"),ne(p.src,b="https://open.spotify.com/embed/playlist/"+t[1]+"?utm_source=generator")||f(p,"src",b),f(p,"width","100%"),f(p,"height","380"),f(p,"frameborder","0"),p.allowFullscreen=!0,f(p,"allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture")},m(i,h){g(i,e,h),v(e,n),g(i,s,h),g(i,l,h),g(i,r,h),g(i,o,h),g(i,c,h),g(i,u,h),g(i,a,h),g(i,m,h),g(i,d,h),g(i,$,h),g(i,P,h),g(i,p,h),L||(w=I(u,"click",t[7]),L=!0)},p(i,h){h&1&&f(e,"href",i[0]),h&2&&!ne(p.src,b="https://open.spotify.com/embed/playlist/"+i[1]+"?utm_source=generator")&&f(p,"src",b)},d(i){i&&y(e),i&&y(s),i&&y(l),i&&y(r),i&&y(o),i&&y(c),i&&y(u),i&&y(a),i&&y(m),i&&y(d),i&&y($),i&&y(P),i&&y(p),L=!1,w()}}}function je(t){let e,n,s=t[4]&&re();function l(c,u){return c[3]?Ie:xe}let r=l(t),o=r(t);return{c(){e=_("section"),s&&s.c(),n=k(),o.c()},m(c,u){g(c,e,u),s&&s.m(e,null),v(e,n),o.m(e,null)},p(c,[u]){c[4]?s||(s=re(),s.c(),s.m(e,n)):s&&(s.d(1),s=null),r===(r=l(c))&&o?o.p(c,u):(o.d(1),o=r(c),o&&(o.c(),o.m(e,null)))},i:E,o:E,d(c){c&&y(e),s&&s.d(),o.d()}}}const Re="https://api.spotify.com/v1/search";function Me(t,e,n){let s="",l="",r="",o=!1,c=!1,u="";const a=b=>b.replace(/[^a-zA-Z]/g,""),m=async()=>{n(4,c=!0);const b=ae(document.location.hash),L=u.split(" ");if(b){const h=(await(await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${b}`}})).json()).id,Q=new Headers;Q.append("Authorization",`Bearer ${b}`);const U=new URLSearchParams;U.append("type","track"),U.append("limit","50");const ue=L.map(T=>new Request(`${Re}?${U}&q=track:${encodeURI(a(T))}`,{method:"GET",headers:Q})),fe=await Promise.all(ue.map(T=>fetch(T))),de=(await Promise.all(fe.map(T=>T.json()))).map((T,z)=>{var X,ee;return((X=T.tracks.items.find(me=>a(me.name).toLowerCase().slice(0,Math.min(a(L[z]).length,5))===a(L[z]).toLowerCase().slice(0,Math.min(a(L[z]).length,5))))==null?void 0:X.uri)||((ee=T.tracks.items[0])==null?void 0:ee.uri)||"spotify:track:1VypWHiTxUHNJKYNY6pY9n"}),H=await(await fetch(`https://api.spotify.com/v1/users/${h}/playlists`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:"A playlist created with Vite + Svelte",public:!0})})).json();n(1,l=H.id);const pe=H.uri;n(0,s=pe),H.external_urls.spotify,await(await fetch(`https://api.spotify.com/v1/users/${h}/playlists/${l}/tracks`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({uris:de})})).json(),setTimeout(()=>{n(4,c=!1),n(3,o=!0)},3e3)}},d=()=>{location.reload()};function $(){r=this.value,n(2,r)}function P(){u=this.value,n(5,u)}return[s,l,r,o,c,u,m,d,$,P,b=>{b.preventDefault(),m()}]}class qe extends Z{constructor(e){super(),W(this,e,Me,je,F,{})}}function Ue(t){let e,n;return e=new Ce({}),{c(){ce(e.$$.fragment)},m(s,l){K(e,s,l),n=!0},i(s){n||(q(e.$$.fragment,s),n=!0)},o(s){Y(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function He(t){let e,n;return e=new qe({}),{c(){ce(e.$$.fragment)},m(s,l){K(e,s,l),n=!0},i(s){n||(q(e.$$.fragment,s),n=!0)},o(s){Y(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function ze(t){let e,n,s,l,r,o,c;const u=[He,Ue],a=[];function m(d,$){return d[0]?0:1}return r=m(t),o=a[r]=u[r](t),{c(){e=_("main"),n=_("h1"),n.textContent="Generate your Playlist with a secret message",s=k(),l=_("div"),o.c(),f(n,"class","svelte-1nh7t5c"),f(l,"class","card")},m(d,$){g(d,e,$),v(e,n),v(e,s),v(e,l),a[r].m(l,null),c=!0},p:E,i(d){c||(q(o),c=!0)},o(d){Y(o),c=!1},d(d){d&&y(e),a[r].d()}}}function Be(t){return[ae(document.location.hash)]}class Je extends Z{constructor(e){super(),W(this,e,Be,ze,F,{})}}new Je({target:document.getElementById("app")});
