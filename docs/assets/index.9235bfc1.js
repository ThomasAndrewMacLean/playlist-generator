const me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};me();function P(){}function ie(t){return t()}function ee(){return Object.create(null)}function S(t){t.forEach(ie)}function he(t){return typeof t=="function"}function D(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let O;function te(t,e){return O||(O=document.createElement("a")),O.href=e,t===O.href}function _e(t){return Object.keys(t).length===0}function m(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function k(){return I(" ")}function H(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ye(t){return Array.from(t.childNodes)}function A(t,e){t.value=e==null?"":e}function be(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let F;function E(t){F=t}const T=[],ne=[],C=[],se=[],ge=Promise.resolve();let B=!1;function ve(){B||(B=!0,ge.then(le))}function J(t){C.push(t)}const z=new Set;let N=0;function le(){const t=F;do{for(;N<T.length;){const e=T[N];N++,E(e),$e(e.$$)}for(E(null),T.length=0,N=0;ne.length;)ne.pop()();for(let e=0;e<C.length;e+=1){const n=C[e];z.has(n)||(z.add(n),n())}C.length=0}while(T.length);for(;se.length;)se.pop()();B=!1,z.clear(),E(t)}function $e(t){if(t.fragment!==null){t.update(),S(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}const x=new Set;let we;function j(t,e){t&&t.i&&(x.delete(t),t.i(e))}function G(t,e,n,s){if(t&&t.o){if(x.has(t))return;x.add(t),we.c.push(()=>{x.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function oe(t){t&&t.c()}function Y(t,e,n,s){const{fragment:r,on_mount:i,on_destroy:c,after_update:a}=t.$$;r&&r.m(e,n),s||J(()=>{const l=i.map(ie).filter(he);c?c.push(...l):S(l),t.$$.on_mount=[]}),a.forEach(J)}function K(t,e){const n=t.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ke(t,e){t.$$.dirty[0]===-1&&(T.push(t),ve(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,s,r,i,c,a=[-1]){const l=F;E(t);const u=t.$$={fragment:null,ctx:null,props:i,update:P,not_equal:r,bound:ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ee(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};c&&c(u.root);let o=!1;if(u.ctx=n?n(t,e.props||{},(f,_,...L)=>{const h=L.length?L[0]:_;return u.ctx&&r(u.ctx[f],u.ctx[f]=h)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](h),o&&ke(t,f)),_}):[],u.update(),o=!0,S(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const f=ye(e.target);u.fragment&&u.fragment.l(f),f.forEach(y)}else u.fragment&&u.fragment.c();e.intro&&j(t.$$.fragment),Y(t,e.target,e.anchor,e.customElement),le()}E(l)}class W{$destroy(){K(this,1),this.$destroy=P}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!_e(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}console.log("adding some \u2764\uFE0F"),document.addEventListener("DOMContentLoaded",()=>{const t=document.createElement("footer");t.classList.add("made-with-love-footer"),t.innerHTML='<p>Made with <span class="heart">&hearts;</span> by <a target="_blank" href="thomasmaclean.be">Thomas MacLean</a></p>',document.body.appendChild(t);const e=t.querySelector(".heart");e.style.color="red";const n=t.querySelector("a");n.style.color="black",t.style.fontFamily="monospace",t.style.textAlign="center",t.style.position="absolute",t.style.bottom="0",t.style.width="100%"});function Pe(t){let e,n;return{c(){e=p("a"),n=I("Login"),d(e,"href",t[0])},m(s,r){b(s,e,r),m(e,n)},p:P,i:P,o:P,d(s){s&&y(e)}}}const Le="ae7bb19fe4ae439f85994652dc206122",Te="https://playlist.thomasmaclean.be",Ee="https://accounts.spotify.com/authorize",Se="token",Oe="playlist-modify-public";function Ae(t){return[`${Ee}?client_id=${Le}&redirect_uri=${Te}&response_type=${Se}&scope=${Oe}`]}class Ne extends W{constructor(e){super(),V(this,e,Ae,Pe,D,{})}}const ce=t=>new URLSearchParams(t.substr(1)).get("access_token");function re(t){let e;return{c(){e=p("div"),e.innerHTML=`<h2 class="svelte-ic62it">Generating your playlist</h2> 
      <div class="lds-ring svelte-ic62it"><div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div> 
        <div class="svelte-ic62it"></div></div>`,d(e,"class","loading svelte-ic62it")},m(n,s){b(n,e,s)},d(n){n&&y(e)}}}function Ce(t){let e,n,s,r,i,c,a,l,u,o,f,_,L,h,v,R;return{c(){e=p("form"),n=p("div"),s=p("label"),s.textContent="Title of your playlist",r=k(),i=p("input"),c=k(),a=p("div"),l=p("label"),l.textContent="Secret message",u=k(),o=p("input"),f=k(),_=p("button"),L=I("Generate"),d(s,"for","title"),d(i,"type","text"),d(i,"id","title"),d(i,"name","title"),d(i,"class","svelte-ic62it"),d(n,"class","wrap svelte-ic62it"),d(l,"for","sentence"),d(o,"type","text"),d(o,"id","sentence"),d(o,"name","sentence"),d(o,"class","svelte-ic62it"),d(a,"class","wrap svelte-ic62it"),_.disabled=h=!t[5]||!t[2],d(e,"class","svelte-ic62it")},m(g,$){b(g,e,$),m(e,n),m(n,s),m(n,r),m(n,i),A(i,t[2]),m(e,c),m(e,a),m(a,l),m(a,u),m(a,o),A(o,t[5]),m(e,f),m(e,_),m(_,L),v||(R=[H(i,"input",t[7]),H(o,"input",t[8]),H(e,"submit",t[9])],v=!0)},p(g,$){$&4&&i.value!==g[2]&&A(i,g[2]),$&32&&o.value!==g[5]&&A(o,g[5]),$&36&&h!==(h=!g[5]||!g[2])&&(_.disabled=h)},d(g){g&&y(e),v=!1,S(R)}}}function xe(t){let e,n,s,r,i,c,a,l,u;return{c(){e=p("a"),n=I("Open playlist"),s=k(),r=p("br"),i=p("br"),c=p("br"),a=k(),l=p("iframe"),d(e,"href",t[0]),d(e,"target","_blank"),d(l,"title","playlist"),be(l,"border-radius","12px"),te(l.src,u="https://open.spotify.com/embed/playlist/"+t[1]+"?utm_source=generator")||d(l,"src",u),d(l,"width","100%"),d(l,"height","380"),d(l,"frameborder","0"),l.allowFullscreen=!0,d(l,"allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture")},m(o,f){b(o,e,f),m(e,n),b(o,s,f),b(o,r,f),b(o,i,f),b(o,c,f),b(o,a,f),b(o,l,f)},p(o,f){f&1&&d(e,"href",o[0]),f&2&&!te(l.src,u="https://open.spotify.com/embed/playlist/"+o[1]+"?utm_source=generator")&&d(l,"src",u)},d(o){o&&y(e),o&&y(s),o&&y(r),o&&y(i),o&&y(c),o&&y(a),o&&y(l)}}}function Ie(t){let e,n,s=t[4]&&re();function r(a,l){return a[3]?xe:Ce}let i=r(t),c=i(t);return{c(){e=p("section"),s&&s.c(),n=k(),c.c()},m(a,l){b(a,e,l),s&&s.m(e,null),m(e,n),c.m(e,null)},p(a,[l]){a[4]?s||(s=re(),s.c(),s.m(e,n)):s&&(s.d(1),s=null),i===(i=r(a))&&c?c.p(a,l):(c.d(1),c=i(a),c&&(c.c(),c.m(e,null)))},i:P,o:P,d(a){a&&y(e),s&&s.d(),c.d()}}}const je="https://api.spotify.com/v1/search";function Re(t,e,n){let s="",r="",i="",c=!1,a=!1,l="";const u=h=>h.replace(/[^a-zA-Z]/g,""),o=async()=>{n(4,a=!0);const h=ce(document.location.hash),v=l.split(" ");if(h){const $=(await(await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${h}`}})).json()).id,Z=new Headers;Z.append("Authorization",`Bearer ${h}`);const M=new URLSearchParams;M.append("type","track"),M.append("limit","50");const ae=v.map(w=>new Request(`${je}?${M}&q=track:${encodeURI(u(w))}`,{method:"GET",headers:Z})),ue=await Promise.all(ae.map(w=>fetch(w))),fe=(await Promise.all(ue.map(w=>w.json()))).map((w,U)=>{var Q,X;return((Q=w.tracks.items.find(pe=>u(pe.name).toLowerCase().slice(0,Math.min(u(v[U]).length,5))===u(v[U]).toLowerCase().slice(0,Math.min(u(v[U]).length,5))))==null?void 0:Q.uri)||((X=w.tracks.items[0])==null?void 0:X.uri)||"spotify:track:1VypWHiTxUHNJKYNY6pY9n"}),q=await(await fetch(`https://api.spotify.com/v1/users/${$}/playlists`,{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({name:i,description:"A playlist created with Vite + Svelte",public:!0})})).json();n(1,r=q.id);const de=q.uri;n(0,s=de),q.external_urls.spotify,await(await fetch(`https://api.spotify.com/v1/users/${$}/playlists/${r}/tracks`,{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({uris:fe})})).json(),setTimeout(()=>{n(4,a=!1),n(3,c=!0)},3e3)}};function f(){i=this.value,n(2,i)}function _(){l=this.value,n(5,l)}return[s,r,i,c,a,l,o,f,_,h=>{h.preventDefault(),o()}]}class Me extends W{constructor(e){super(),V(this,e,Re,Ie,D,{})}}function qe(t){let e,n;return e=new Ne({}),{c(){oe(e.$$.fragment)},m(s,r){Y(e,s,r),n=!0},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){G(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Ue(t){let e,n;return e=new Me({}),{c(){oe(e.$$.fragment)},m(s,r){Y(e,s,r),n=!0},i(s){n||(j(e.$$.fragment,s),n=!0)},o(s){G(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function He(t){let e,n,s,r,i,c,a;const l=[Ue,qe],u=[];function o(f,_){return f[0]?0:1}return i=o(t),c=u[i]=l[i](t),{c(){e=p("main"),n=p("h1"),n.textContent="Generate your Playlist with a secret message",s=k(),r=p("div"),c.c(),d(n,"class","svelte-1nh7t5c"),d(r,"class","card")},m(f,_){b(f,e,_),m(e,n),m(e,s),m(e,r),u[i].m(r,null),a=!0},p:P,i(f){a||(j(c),a=!0)},o(f){G(c),a=!1},d(f){f&&y(e),u[i].d()}}}function ze(t){return[ce(document.location.hash)]}class Be extends W{constructor(e){super(),V(this,e,ze,He,D,{})}}new Be({target:document.getElementById("app")});
